<template>
    <lightning-card title={cardTitle}>
        <div slot="actions">
            <slot name="actions"></slot>
        </div>
        <div class="slds-var-p-around_medium">
            <div class="slds-text-align_center">
                <lightning-button
                    label="New Card"
                    variant="brand"
                    onclick={addCard}
                    class="slds-var-m-right_small"
                ></lightning-button>
            </div>
            <div
                class="container slds-var-m-top_medium"
                onmousedown={panStart}
                onmouseup={panEnd}
            >
                <div
                    class="canvas slds-var-m-top_medium"
                    onmousedown={dragStart}
                    onmouseup={dragEnd}
                    onmousemove={drag}
                    style={canvasStyle}
                >
                    <template if:true={cards}>
                        <template for:each={cards} for:item="card">
                            <c-card
                                description={card.Description__c}
                                background={card.Color__c}
                                key={card.Id}
                                card-id={card.Id}
                                data-cardid={card.Id}
                                style={card.style}
                                ondeletecard={handleCardDelete}
                            ></c-card>
                        </template>
                    </template>
                </div>
            </div>
        </div>
    </lightning-card>

    <template if:true={shouldListenToChanges}>
        <c-event-listener
            channel-name="/topic/CardChangeUpdates"
            onmessage={handleMessageFromListener}
        ></c-event-listener>
    </template>
</template>
